# Character 数据库管理界面

## 主界面布局

```
╔══════════════════════════════════════════════════════════════════════════════╗
║                        Character 数据库管理 (1000x700)                         ║
╠════════════════════════════╦═════════════════════════════════════════════════╣
║ Character 列表             ║  [新建] [编辑] [删除] [刷新] [导出 JSON]        ║
║ ┌────────────────────────┐ ║                                                 ║
║ │ ID   │ 名称  │ATK│HP │SPD│ ║  Character 详情                                ║
║ ├──────┼───────┼───┼───┼───┤ ║ ┌─────────────────────────────────────────┐   ║
║ │ 0001 │wooden │ 1 │1000│ 5 │ ║ │ {                                       │   ║
║ │      │_man   │   │    │   │ ║ │   "id": "0001",                         │   ║
║ ├──────┼───────┼───┼───┼───┤ ║ │   "name": "wooden_man",                 │   ║
║ │ 0002 │ Ch1   │ 1 │ 20 │ 1 │ ║ │   "localization": "木头人",              │   ║
║ ├──────┼───────┼───┼───┼───┤ ║ │   "attack_power": 1,                    │   ║
║ │ 0003 │ Ch2   │ 2 │ 12 │ 1 │ ║ │   "health_points": 1000,                │   ║
║ ├──────┼───────┼───┼───┼───┤ ║ │   "speed": 5,                           │   ║
║ │ 0004 │ Ch3   │10 │ 3  │ 4 │ ║ │   "hate_value": 1,                      │   ║
║ ├──────┼───────┼───┼───┼───┤ ║ │   "price": 1,                           │   ║
║ │ 0005 │ Ch4   │ 5 │ 8  │ 2 │ ║ │   "weapon": "fist",                     │   ║
║ └──────┴───────┴───┴───┴───┘ ║ │   "energy": 3,                          │   ║
║        (带滚动条)             ║ │   "avaliable_location": [               │   ║
║                               ║ │     "front",                            │   ║
║                               ║ │     "back"                              │   ║
║                               ║ │   ],                                    │   ║
║                               ║ │   "fetter": null,                       │   ║
║                               ║ │   "hate_matrix": [                      │   ║
║                               ║ │     [1, 1, 1],                          │   ║
║                               ║ │     [1, 1, 1],                          │   ║
║                               ║ │     [1, 1, 1]                           │   ║
║                               ║ │   ]                                     │   ║
║                               ║ │ }                                       │   ║
║                               ║ │                                         │   ║
║                               ║ └─────────────────────────────────────────┘   ║
║                               ║              (可滚动查看)                      ║
╚════════════════════════════╩═════════════════════════════════════════════════╝
```

## 新建/编辑对话框

```
╔════════════════════════════════════════════╗
║     新建 Character / 编辑 Character          ║
╠════════════════════════════════════════════╣
║                                            ║
║  ID:                [________________]     ║
║  Name:              [________________]     ║
║  Localization:      [________________]     ║
║  Attack Power:      [________________]     ║
║  Health Points:     [________________]     ║
║  Speed:             [________________]     ║
║  Hate Value:        [________________]     ║
║  Price:             [________________]     ║
║  Weapon:            [________________]     ║
║  Energy:            [________________]     ║
║                                            ║
║  Available Location (JSON):                ║
║  ┌──────────────────────────────────────┐ ║
║  │                                      │ ║
║  │                                      │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  Fetter (JSON):                            ║
║  ┌──────────────────────────────────────┐ ║
║  │                                      │ ║
║  │                                      │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  Hate Matrix (JSON):                       ║
║  ┌──────────────────────────────────────┐ ║
║  │                                      │ ║
║  │                                      │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║         (可滚动查看所有字段)                 ║
║                                            ║
║              [取消]      [确定]             ║
╚════════════════════════════════════════════╝
```

## 功能说明

### 主界面操作

1. **查看列表**
   - 左侧表格显示所有角色的基本信息
   - 双击或选中某行可在右侧查看完整 JSON 数据

2. **新建角色**
   - 点击 [新建] 按钮
   - 在弹出对话框中填写所有字段
   - 点击 [确定] 保存

3. **编辑角色**
   - 先在左侧列表选中要编辑的角色
   - 点击 [编辑] 按钮
   - 在弹出对话框中修改字段
   - 点击 [确定] 保存

4. **删除角色**
   - 先在左侧列表选中要删除的角色
   - 点击 [删除] 按钮
   - 在确认对话框中点击 [是]

5. **刷新列表**
   - 点击 [刷新] 按钮重新加载数据

6. **导出 JSON**
   - 点击 [导出 JSON] 按钮
   - 数据将导出到 `../py灰盒/character_config.json`

### 自动版本控制

- **启动时**: 自动执行 `updateDb()`，从 `sql/database_dump.sql` 重建数据库
- **关闭时**: 自动执行 `dumpSql()`，将数据库保存到 `sql/database_dump.sql`

这确保了团队成员之间的数据同步，所有更改通过 Git 追踪 SQL 文件。

## 技术实现

- **GUI 框架**: tkinter (Python 标准库)
- **数据库**: SQLite3 (Python 标准库)
- **数据格式**: JSON (Python 标准库)

所有依赖都是 Python 内置模块，无需额外安装。
