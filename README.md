# wulin_drama (武林戏)

武林主题的游戏开发与故事创作项目。

## 项目简介

本项目是一个以武侠为主题的综合项目，包含自走棋战斗模拟器和武侠故事文档管理两大模块。

## 能处理什么任务

### 1. 自走棋战斗模拟器 (自走棋策划/py灰盒)

#### 核心功能

- **角色管理**
  - 支持通过 JSON 配置文件定义角色属性
  - 角色属性包括：攻击力、生命值、速度、仇恨值、价格、武器、能量等
  - 支持角色定位系统（前排、中排、后排）
  - 支持角色羁绊系统

- **战斗模拟**
  - 基于网格的战斗系统（3x3 网格）
  - 自动战斗模拟，支持攻击和反击机制
  - 智能目标选择系统（基于仇恨值矩阵）
  - 伤害计算系统（物理伤害、魔法伤害等）
  - 实时战斗日志记录

- **游戏棋盘**
  - 红蓝双方对战系统
  - 角色位置管理（前排、中排、后排）
  - 角色状态追踪（生命值、攻击力等）

- **事件系统**
  - 基于装饰器的事件管理器 (@em.on())
  - 支持自定义事件监听和触发

- **工具功能**
  - CSV/Excel 角色数据转 JSON 工具
  - 日志系统（控制台输出 + 文件保存）
  - 时间戳记录

#### 技术栈

- Python 3.x
- Pygame（游戏渲染和精灵管理）
- Rich（终端美化输出）
- JSON（配置文件管理）

### 2. 武侠故事文档管理 (mjyl)

#### 功能

- 武侠小说和传记文档管理
- 包含多个完整的角色传记：
  - 冷缘剑主传【尉藏锋】
  - 第一才子传【文逸】
  - 无畏剑主前传【胡无畏】
  - 胧月剑主前传【吴长生】
  - 胧月剑主外传【赵婉君】
- 时间线管理（时间线.xlsm）
- 角色设定管理

## 使用方法

### 运行战斗模拟器

```bash
cd 自走棋策划/py灰盒
python main.py
```

### 角色配置

编辑 `character_config.json` 或 `roles.json` 文件来添加或修改角色：

```json
{
  "0001": {
    "id": "0001",
    "name": "角色名称",
    "localization": "本地化名称",
    "attack_power": 1,
    "health_points": 100,
    "speed": 5,
    "hate_value": 1,
    "price": 1,
    "weapon": "武器类型",
    "hate_matrix": [[1,1,1],[1,1,1],[1,1,1]]
  }
}
```

### 数据转换

将 CSV 或 Excel 格式的角色数据转换为 JSON：

```bash
cd 自走棋策划/py灰盒
python emphrase_csv_2_json.py
```

## 项目结构

```
wulin_drama/
├── 自走棋策划/           # 自走棋游戏开发
│   ├── py灰盒/          # Python 原型实现
│   │   ├── main.py     # 主程序入口
│   │   ├── entity.py   # 实体和角色类
│   │   ├── character.py # 角色定义
│   │   ├── grid.py     # 游戏网格系统
│   │   ├── simulator.py # 战斗模拟器
│   │   ├── util.py     # 工具函数
│   │   ├── *.json      # 角色配置文件
│   │   └── logs/       # 游戏日志
│   └── godot_demo/     # Godot 引擎演示
├── mjyl/               # 武侠故事文档
│   ├── *.docx         # 各类传记文档
│   └── 时间线.xlsm    # 时间线管理
└── README.md          # 本文件
```

## 开发路线

- [x] 基础战斗模拟器
- [x] 角色系统
- [x] 网格系统
- [x] 事件管理器
- [ ] UI 界面开发
- [ ] 更多角色和技能
- [ ] 羁绊系统完善
- [ ] 装备系统

## 许可证

详见 LICENSE 文件。